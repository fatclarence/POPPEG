<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="shortcut icon" href="#" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/"
        crossorigin="anonymous">
    <link rel="stylesheet" href="css/main.css" type="text/css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
    <script src="https://www.gstatic.com/firebasejs/5.8.0/firebase.js"></script>
    <script>
        const emptyHeader = '<div id="emptyHeader" class="col-md-12 col-xs-12 text-center standard-header"><span>Your cart is currently empty!</span></div>';
        function removeCard() {
            this.parentNode.parentNode.removeChild(this.parentNode);
            console.log(document.getElementsByClassName('card-template'));
            if (document.getElementsByClassName('card-template').length === 0) {
                document.getElementById("uploadContainer").innerHTML = emptyHeader;
            }
        }
        let number_of_cards = 0;
        var apiURL = "http://localhost:5000/";
        // var apiURL = "https://poppeg.com/";

        $(document).ready(() => {
            $('#getAlbumButton').on('click', (event) => {
                window.location.href = apiURL + 'uploadpage';
            });
            $('#addCardButton').on('click', (event) => {
                // when you add a new card, the emptyHeader must be removed
                if (document.getElementById("emptyHeader") !== null) {
                    $('#emptyHeader').remove();
                } else { }

                // standard click add button, add to uploadContainer a card
                let uploadContainer = document.getElementById("uploadContainer");
                let newCard = document.createElement("div");
                newCard.className = "row card-template";
                newCard.id = "cardTemplate" + number_of_cards;
                uploadContainer.appendChild(newCard);
                let newImage = document.createElement("div");
                newImage.className = "col-xs-12 col-md-5 col-lg-5 media-block"
                newImage.innerHTML = "Image: ";
                newImage.id = "imageBlock" + number_of_cards;
                newImage.style.fontSize = "18px";
                newImage.style.fontWeight = "bold";
                newImage.style.backgroundColor = "#FFFDD0";
                newImage.style.fontFamily = "Open Sans";
                newImage.style.borderLeft = "solid black 2px";
                newImage.style.borderTop = "solid black 2px";
                newImage.style.borderBottom = "solid black 2px";
                newImage.style.borderBottomLeftRadius = "10px";
                newImage.style.borderTopLeftRadius = "10px";
                let newImgInput = document.createElement("input");
                newImgInput.id = "imageUpload" + number_of_cards;
                newImgInput.type = "file";
                newImgInput.accept = "image/*";
                newImgInput.style.display = "inline";
                document.getElementById(`cardTemplate${number_of_cards}`).append(newImage);
                document.getElementById(`imageBlock${number_of_cards}`).append(newImgInput);
                let newVid = document.createElement("div");
                newVid.className = "col-xs-12 col-md-5 col-lg-5 media-block"
                newVid.innerHTML = "Video: ";
                newVid.id = "videoBlock" + number_of_cards;
                newVid.style.fontSize = "18px";
                newVid.style.fontWeight = "bold";
                newVid.style.backgroundColor = "#FFFDD0";
                newVid.style.fontFamily = "Open Sans";
                newVid.style.borderTop = "solid black 2px";
                newVid.style.borderRight = "solid black 2px";
                newVid.style.borderBottom = "solid black 2px";
                let newVidInput = document.createElement("input");
                newVidInput.id = "videoUpload" + number_of_cards;
                newVidInput.type = "file";
                newVidInput.accept = "video/*";
                newVidInput.style.display = "inline";
                document.getElementById(`cardTemplate${number_of_cards}`).append(newVid);
                document.getElementById(`videoBlock${number_of_cards}`).append(newVidInput);
                let deleteButton = document.createElement("button");
                deleteButton.id = "deleteButton" + number_of_cards;
                deleteButton.className = "delete-btn col-xs-6 col-md-1 col-lg-1";
                deleteButton.innerHTML = "X";
                deleteButton.type = "button";
                deleteButton.fontFamily = "Open Sans";
                document.getElementById(`cardTemplate${number_of_cards}`).append(deleteButton);
                document.getElementById(`deleteButton${number_of_cards}`).addEventListener("click", removeCard);
                console.log("EXECUTED");
                number_of_cards += 1;

            });
            $('#uploadButton').on('click', (event) => {
                console.log(document.getElementById("trash"));
            });
        });


    </script>
</head>

<body>
    <div class="row">
        <div class="col-xs-12 col-md-6 col-lg-4 col-md-offset-3 col-lg-offset-4">
            <img src="media/poppeg_strip_vector.png" class="poppeg-logo img-fluid" alt="Responsive image" style="width: 100%" />
        </div>
    </div>
    <div class="row">
        <div class="container" id="uploadContainer">
            <div id="emptyHeader" class="col-md-12 col-xs-12 text-center standard-header">
                <span>Your cart is currently empty!</span>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12 col-md-3 col-lg-3 col-md-offset-3 col-lg-offset-3">
            <button id="addCardButton" type="button" class="btn btn-green btn-block btn-lg" style="margin-top:15px">
                Add New Card
            </button>
        </div>
        <div class="col-xs-12 col-md-3 col-lg-3">
            <button id="uploadButton" type="button" class="btn btn-red btn-block btn-lg" style="margin-top:15px">
                Upload Now!
            </button>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12 col-md-6 col-lg-4 col-lg-offset-4" style="margin-top: 30px">
            <p><span class="text-white footer">A Project by POPPEG</span></p>
        </div>
    </div>
</body>